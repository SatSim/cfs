<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CFS Scheduler (SCH) Application on  User&apos;s Guide: CFS Scheduler Deployment Guide</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="index.html">index</a></div>
<h1><a class="anchor" name="cfsschdg">CFS Scheduler Deployment Guide</a></h1>In order to successfully integrate the Scheduler Application into a system, the cFE must first be configured to allow for the following: <br>
<p>
<ul>
<li>
The  CFE Software Bus must be configured to have sufficient Pipe resources to allocate one pipe to SCH (see <a class="elRef" doxygen="cfe.tag:../cfe/" href="../cfe/cfe__platform__cfg_8h.html#d03c61cb395fc49e4a1f139724e05c8b">CFE_SB_MAX_PIPES</a>) with a pipe depth as specified by <a class="el" href="sch__platform__cfg_8h.html#0efb7feeef71f7d97bbca9bae5dd7c36">SCH_PIPE_DEPTH</a> <br>
 </li>
<li>
The  CFE Table Services must be configured to allow SCH to have two single buffered tables (see <a class="elRef" doxygen="cfe.tag:../cfe/" href="../cfe/cfe__platform__cfg_8h.html#49a7ac768f0c227a5f62668fce25da48">CFE_TBL_MAX_NUM_TABLES</a>) <br>
 </li>
<li>
The  CFE Table Services must be configured to allow for Single Buffered Tables as large as the largest of the SCH Schedule Definition Table and the Message Definition Table. The Schedule Definition Table's size can be determined with the following equation: <br>
<br>
 SDT Size (in bytes) = <a class="el" href="sch__platform__cfg_8h.html#640d7089f602476608c00d5d9b613315">SCH_TOTAL_SLOTS</a> * <a class="el" href="sch__platform__cfg_8h.html#191125a78975e2a0c581969c7d678b4e">SCH_ENTRIES_PER_SLOT</a> * 12 (sizeof one SDT record)<br>
<br>
 The size of the Message Definition Table can be determined with the following equation:<br>
<br>
 MDT Size (in bytes) = <a class="el" href="sch__platform__cfg_8h.html#bae40b96462eac577fb95363ee030a38">SCH_MAX_MSG_WORDS</a> * <a class="el" href="sch__platform__cfg_8h.html#02550ee5880be5061544001811deecec">SCH_MAX_MESSAGES</a> <br>
<br>
 </li>
<li>
The <a class="el" href="sch__msgids_8h.html#6b68abc81890d0891f1562df904fca7d">SCH Housekeeping Request Message </a> needs to be put into the SCH Schedule Definition Table and the SCH Message Definition Table in order to notify SCH when the SCH Housekeeping message should be generated <br>
 </li>
<li>
The default SCH Schedule Definition Table (location specified by the <a class="el" href="sch__platform__cfg_8h.html#a0a00e5974aa67bfe91ce39d1f2db1d3">SCH_SCHEDULE_FILENAME</a> configuration parameter) must be available before the SCH is started <br>
 </li>
<li>
The default SCH Message Definition Table (location specified by the <a class="el" href="sch__platform__cfg_8h.html#052acaa8ebd6c01b4fcc35636ea3b265">SCH_MESSAGE_FILENAME</a> configuration parameter) must be available before the SCH is started <br>
 </li>
</ul>
<p>
<h3>Scheduler Timing Customization</h3>
<p>
The Scheduler application contains the file <code><a class="el" href="sch__custom_8c.html">sch_custom.c</a></code> which can be adapted to take advantage of platform specific functionality concerning Major Frame timing, Minor Frame timing, and current slot determiniation. While no changes are required to this file for SCH to be functional, it may be possible to obtain better accuracy or increase processing efficiency by modifying the contents. <br>
<p>
This customizable section of code includes four required functions for interface purposes: <ul>
<li>
<a class="el" href="sch__custom_8c.html#460799de20a37103670e068ec0cd3854">SCH_CustomEarlyInit</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#769b51f7ffc7c7711cc7bf0856702a77">SCH_CustomLateInit</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#0f0feaac769ebba7a790a5575edfa482">SCH_CustomGetCurrentSlotNumber</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#521f028b851995a3755ed7e4294f3b9e">SCH_CustomCleanup</a> </li>
</ul>
<p>
It also contains two important local functions that act as interrupt handlers: <ul>
<li>
<a class="el" href="sch__custom_8c.html#18afe2a56ba0bfdd348e88f0d8a9d55b">SCH_MajorFrameCallback</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#f2799afed4a19fadc0a75dc7419a93ca">SCH_MinorFrameCallback</a> </li>
</ul>
These Callback functions should not require significant modification if just changing the timing source. It is very important to note, however, that SCH_MinorFrameCallback currently assumes that it is using a timing function similar to OS_TimerSet that allows both a first and a subsequent repeated time setting. If a time setting function that only allows a single time to be set is used, a further case must be added that will allow the SCH_SHORT_SLOT_PERIOD to be set back to SCH_NORMAL_SLOT_PERIOD on the next minor frame call if the major frame is no longer being used. <br>
<p>
<h3>Stopping/Starting Scheduler During Critical Activities</h3>
<p>
The Scheduler application has an associated Scheduler Library that can be used to enable and disable schedule processing if <a class="el" href="sch__platform__cfg_8h.html#3e60196dcee964e40ea2fa02432ce9f1">SCH_LIB_PRESENCE</a> is set to 1 (if it is set to 0, the library is not used, and does not even need to exist). The library consists of three APIs: <ul>
<li>
<a class="el" href="sch__api_8h.html#ab71b469c1425ea9d7614b32e7d7df61">SCH_EnableProcessing</a> </li>
<li>
<a class="el" href="sch__api_8h.html#ad38183597fbb62abc726897709bafe6">SCH_DisableProcessing</a> </li>
<li>
<a class="el" href="sch__api_8h.html#295c643b60c7ae27f4d3dd9114fcc091">SCH_GetProcessingState</a> </li>
</ul>
SCH_EnableProcessing must be called as many times as SCH_DisableProcessing has previously been called to re-enable processing. Note that while processing is disabled, SCH will not respond to ground commands.<p>
Next: <a class="el" href="cfsschcmds.html">CFS Scheduler Commands</a> <br>
 Prev: <a class="el" href="cfsschreq.html">CFS Scheduler Requirements</a> <hr size="1"><address style="align: right;"><small>Generated on Sun Mar 1 15:31:54 2015 for CFS Scheduler (SCH) Application on  User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
